<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <% if (locals.user) { %>
            <%= user.name %>
        <%}%>
    </title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="CSS/profile.css">
</head>

<body>

    <section id="left">

        <header>
            <div>
                <div class="hamburger-icon">
                    <p></p>
                    <p></p>
                    <p></p>
                </div>

                <div id="name">
                    <h3>the <span> garden </span> of eat'n</h3>
                </div>
            </div>
        </header>

        <section class="sidebarLinks">
            <ul>
                <li><a href="/home"><i class="fa-solid fa-house"></i> home</a></li>
                <li><a href="/"><i class="fa-solid fa-chalkboard-user"></i> about us</a></li>
                <li><a href=""><i class="fa-solid fa-cart-shopping"></i> go to cart</a></li>
                <li><a href=""><i class="fa-solid fa-utensils"></i> book a table</a></li>
                <li><a href=""><i class="fa-solid fa-utensils"></i> our services</a></li>
                <li class="profile"><a href="/profile"><i class="fa-solid fa-user"></i> edit profile</a></li>
                <li><a href=""><i class="fa-solid fa-calendar"></i> your orders</a></li>
                <li><a href=""><i class="fa-solid fa-hat-cowboy"></i> membership</a></li>
                <li><a href=""><i class="fa-solid fa-handshake-simple"></i> join us</a></li>
                <li><a href=""><i class="fa-solid fa-gear"></i> settings</a></li>

                <li class="logout">
                    <form action="/logout" method="post">
                        <button>
                            <i class="fa-solid fa-right-from-bracket"></i>
                            logout
                        </button>
                    </form>
                </li>
            </ul>

            <div class="copyright">
                <p>
                    Copyright &#169; <span id="copyright-year"></span>
                </p>
                <p>
                    the garden of eat'n
                </p>
            </div>

        </section>

    </section>


    <section id="right">
        
        <form action="/profile" method="post" enctype="multipart/form-data">

            <h3>Your Profile</h3>

            <div class="profile-container">
                
                <div class="profilePhoto">
                    
                    <figure>
                        <img src="<% if (locals.user.profileImg ) { %>
                            <%= user.profileImg %>  
                        <% } else { %> Icons/username-icon.png <% } %> " id="chosen-image">
                    </figure>
                    
                    <input type="file" accept="image/*" hidden name="profileImg" id="upload-button" />
                    
                    <label for="upload-button">
                        <p>edit photo</p>
                    </label>

                </div>

            </div>

            <input type="hidden" name="id" value="<%= user._id %>" />
            
            <div>
                <span>*</span>
                <i class="fa-solid fa-user"></i>
                <input type="text" name="name" placeholder="Your Name" value="<%= user.name%>" autocomplete="off" />
            </div>
            
            <div>
                <span>*</span>
                <i class="fa-solid fa-at"></i>
                <input type="email" name="username" placeholder="Email ID" value="<%= user.username %>" autocomplete="off" />
            </div>

            <div>
                <span>*</span>
                <i class="fa-solid fa-mobile"></i>
                <input type="text" name="mobileNumber" placeholder="Mobile Number" value="<%= user.mobileNumber %>" autocomplete="off" />
            </div>

            <div class="gender">
                <span>*</span>
                <i class="fa-solid fa-venus-mars"></i>
                <p>Gender: </p>
                
                <label for="male">Male 
                    <input type="radio" id="male" name="gender" value="male" />
                </label>
                <label for="female">Female 
                    <input type="radio" id="female" name="gender" value="male">
                </label>
                <label for="other">Other 
                    <input type="radio" id="other" name="gender" value="male">
                </label>
            </div>

            <div class="dob">
                <span>*</span>
                <i class="fa-solid fa-calendar"></i>
                <p>Date Of Birth: </p>
                <input type="date" name="DOB" placeholder="Date Of Birth" value="<%= user.DOB %>" />
            </div>

            <% if (!locals.user.DOB) { %>
                <p class="dob-msg">*update your DOB to get free delivery on your birthday</p>
            <%}%>

            <div class="newPassword">
                <i class="fa-solid fa-lock"></i>
                <input type="text" name="password" placeholder="Change Password">
            </div>

            <div>
                <i class="fa-solid fa-circle-check"></i>
                <input type="text" name="confirmPassword" placeholder="Confirm Password">
            </div>

            <% if (locals.message) { %>
                <p class="submission-msg">*<%= message %></p>
            <%}%>

            <button>Update profile</button>

        </form>
    </section>
</body>

<script src="JS/profile.js" defer></script>

</html>